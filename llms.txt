# sgplot

sgplot is an R package for creating accessible plots in the Scottish
Government. Currently, functions are available for styling ggplot2
plots.

The package has been developed using the [Government Analysis Function
Data Visualisation
guidance](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-charts/)
and uses accessible colour palettes from the [Scottish Government Design
System](https://designsystem.gov.scot/guidance/charts/data-visualisation-colour-palettes).
sgplot should be used in conjunction with these guidance documents.

More information about the package and its functions can be found on the
[sgplot website](https://ScotGovAnalysis.github.io/sgplot/). In
particular, the
[cookbook](https://ScotGovAnalysis.github.io/sgplot/articles/cookbook.html)
contains lots of examples. Slides are also available for an internal
[presentation given to statisticians and
analysts](https://alice-hannah.github.io/presentations-and-blogs/2023-06-19_sgplot/slides.html).

## Installation

If you are working within the Scottish Government network, you can
install sgplot in the same way as with other R packages.

Alternatively, install from CRAN:

``` r
install.packages("sgplot")
```

Or install the development version from GitHub:

``` r
# install.packages("remotes")
remotes::install_github(
  "ScotGovAnalysis/sgplot",
  upgrade = "never",
  build_vignettes = TRUE
)
```

## Getting Started

Once installed, sgplot can be loaded using the
[`library()`](https://rdrr.io/r/base/library.html) function:

``` r
library(sgplot)
```

Help files for each function in the package can be found on the
[References](https://ScotGovAnalysis.github.io/sgplot/reference/) page
of the package website. Alternatively, type `?function_name` into the
RStudio console. For example:

``` r
?theme_sg()
```

### Use sgplot as default

The easiest way to use sgplot is by adding
[`use_sgplot()`](https://ScotGovAnalysis.github.io/sgplot/reference/use_sgplot.md)
to the beginning of your R script, Rmarkdown document or Shiny app code.
This function will set a number of defaults to ggplot2 geoms, use sgplot
colour palettes and use
[`theme_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/theme_sg.md).

#### Example 1: Plot with one colour using ggplot2 defaults

``` r
library(sgplot)
library(ggplot2)
library(dplyr)
library(gapminder)

gapminder |> 
  filter(year == 2007 & continent == "Americas") |>
  slice_max(order_by = pop, n = 5) |>
  ggplot() +
  geom_col(aes(x = reorder(country, -pop), y = pop)) +
  scale_y_continuous(
    labels = scales::label_number(scale = 1E-6),
    expand = c(0, 0)
  ) +
  labs(
    x = NULL,
    y = NULL,
    title = "The United States is the most populous country in the Americas",
    subtitle = "Population of countries in the Americas (millions), 2007",
    caption = "Source: Gapminder"
  )
```

![A bar chart with grey background, white grid lines and dark grey
bars.](reference/figures/README-ex1-1.svg)

#### Example 2: Plot with one colour using sgplot defaults

``` r
sgplot::use_sgplot()

gapminder |> 
  filter(year == 2007 & continent == "Americas") |>
  slice_max(order_by = pop, n = 5) |>
  ggplot() +
  geom_col(aes(x = reorder(country, -pop), y = pop)) +
  scale_y_continuous(
    labels = scales::label_number(scale = 1E-6),
    expand = c(0, 0)
  ) +
  labs(
    x = NULL,
    y = NULL,
    title = "The United States is the most populous country \nin the Americas",
    subtitle = "Population of countries in the Americas (millions), 2007",
    caption = "Source: Gapminder"
  )
```

![A bar chart with white background, light grey horizontal grid lines
dark blue bars.](reference/figures/README-ex2-1.svg)

#### Note on use of titles, subtitles and captions

Titles, subtitles and captions have been embedded in these example
charts for demonstration purposes. However, for accessibility reasons,
it is usually preferable to provide titles in the body of the page
rather than embedded within the image of the plot. More information is
available in the [accessibility
article](https://ScotGovAnalysis.github.io/sgplot/articles/accessibility.html#other-accessibility-considerations).

## Related package

sgplot is the basis for the
[afcharts](https://best-practice-and-impact.github.io/afcharts/)
package, developed by the [Government Analysis
Function](https://analysisfunction.civilservice.gov.uk/). The packages
remain similar, with both following the [Analysis Function Data
Visualisation
guidance](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-charts/),
however sgplot also uses guidance from the [Scottish Government Design
System](https://designsystem.gov.scot/guidance/charts/data-visualisation-colour-palettes).

Scottish Government analysts should continue to use sgplot, rather than
afcharts.

## Licence

Unless stated otherwise, the codebase is released under [the MIT
License](https://ScotGovAnalysis.github.io/sgplot/LICENSE). This covers
both the codebase and any sample code in the documentation.

The documentation is [Â© Crown
copyright](https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/)
and available under the terms of the [Open Government
3.0](https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/)
licence.

# Package index

## Set defaults

- [`use_sgplot()`](https://ScotGovAnalysis.github.io/sgplot/reference/use_sgplot.md)
  : Use sgplot defaults.

## Style

- [`theme_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/theme_sg.md)
  : Scottish Government theme for ggplot2 charts.

## Colour scales

- [`scale_colour_continuous_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/scale_colour_continuous_sg.md)
  [`scale_fill_continuous_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/scale_colour_continuous_sg.md)
  : Continuous colour/fill scales for Scottish Government plots
- [`scale_colour_discrete_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/scale_colour_discrete_sg.md)
  [`scale_fill_discrete_sg()`](https://ScotGovAnalysis.github.io/sgplot/reference/scale_colour_discrete_sg.md)
  : Discrete colour/fill scales for Scottish Government plots

## Colour values

- [`sg_colour_values`](https://ScotGovAnalysis.github.io/sgplot/reference/sg_colour_values.md)
  [`sg_colour_palettes`](https://ScotGovAnalysis.github.io/sgplot/reference/sg_colour_values.md)
  : Scottish Government colours and palettes
- [`sss_colour_values`](https://ScotGovAnalysis.github.io/sgplot/reference/sss_colour_values.md)
  [`sss_colour_palettes`](https://ScotGovAnalysis.github.io/sgplot/reference/sss_colour_values.md)
  : Social Security Scotland colours and palettes
- [`af_colour_values`](https://ScotGovAnalysis.github.io/sgplot/reference/af_colour_values.md)
  [`af_colour_palettes`](https://ScotGovAnalysis.github.io/sgplot/reference/af_colour_values.md)
  : Government Analysis Function colours and palettes

## Helpers

- [`available_palettes()`](https://ScotGovAnalysis.github.io/sgplot/reference/available_palettes.md)
  [`available_palette_types()`](https://ScotGovAnalysis.github.io/sgplot/reference/available_palettes.md)
  : Available palettes and palette types
- [`check_palette()`](https://ScotGovAnalysis.github.io/sgplot/reference/check_palette.md)
  [`check_palette_type()`](https://ScotGovAnalysis.github.io/sgplot/reference/check_palette.md)
  : Check palettes and palette types
- [`mm_to_inch()`](https://ScotGovAnalysis.github.io/sgplot/reference/mm_to_inch.md)
  : Convert millimetres to inches

# Articles

### All vignettes

- [Accessibility](https://ScotGovAnalysis.github.io/sgplot/articles/accessibility.md):
- [Colours](https://ScotGovAnalysis.github.io/sgplot/articles/colours.md):
- [Cookbook](https://ScotGovAnalysis.github.io/sgplot/articles/cookbook.md):
- [Saving
  charts](https://ScotGovAnalysis.github.io/sgplot/articles/saving.md):
