---
title: "Colours"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Colours}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE,
  eval = TRUE,
  echo = FALSE
)

table_note <- "Note: the cells in the ‘Example of colour’ column may appear blank to screen reader software. They contain a colour fill, but no data."
```

sgplot uses colour palettes from the [Scottish Government Design System](https://designsystem.gov.scot/guidance/charts). 
These palettes have been developed to... 

*   meet [accessibility legislation](https://www.w3.org/TR/WCAG21/) applicable to the public sector. what considerations have been made? (e.g. colour blindness, greyscale, white background, contrast)

*   ensure consistency

sgplot uses the Scottish Government palettes by default, however colour palettes from the [Government Analysis Function colours guidance](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/) are also available to use.

Both the Scottish Government Design System and the Analysis Function have published guidance for using colour effectively and accessibly in data visualisations. sgplot should be used in conjunction with this guidance.

*   [Scottish Government guidance](https://designsystem.gov.scot/guidance/charts)

*   [Analysis Function guidance](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/)

The following are a few key considerations when using colour in plots:

*   Only use colour if absolutely necessary
*   Limit the number of different colours you use; ideally an absolute maximum of four
*   Use colour palettes in the order presented to ensure adjacent colours have sufficient contrast with each other
*   Use colour consistently when producing a series of plots
*   Do not rely on colour alone to communicate a message


## Scottish Government colour palettes

### Main palette

The `main` palette should be used with categorical data.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::sg_colour_palettes$main)
```

You should try to use an absolute maximum of four colours in a data visualisation. If you feel you need more than four, think about how you could redesign your chart to avoid this. If you absolutely must use more than four colours, the `main-extended` palette can be used.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::sg_colour_palettes$`main-extended`)
```


### Sequential data palette

The `sequential` colour palette should be used for data where the order has some meaning.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::sg_colour_palettes$sequential)
```

As this palette is restricted to tints of one colour, there are issues with colour contrast.
Neither `dark-blue` or `light-blue` have sufficient colour contrast with `mid-blue`. 
Follow the [advice for using the sequential palette](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/#section-6) in the Analysis Function colour guidance when using this palette.


### Focus chart palette

The `focus` palette should be used to highlight specific elements of a plot.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::sg_colour_palettes$focus)
```

The `grey` in this palette does not meet the required colour contrast with an off-white background (#f8f8f8), therefore data visualisations using this palette should only use a white background (#ffffff).


## Analysis Function colour palettes

Scottish Government colour palettes are used by default in sgplot. If you wish to use an Analysis Function palette, set `palette_type = "af"` when using any of the `scale_` [colour functions](https://datasciencescotland.github.io/sgplot/reference/index.html#colours).

### Main palette

The main palette should be used with categorical data.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::af_colour_palettes$main)
```

The `main2` palette should be used if only two colours are required as the dark blue and orange colours have the best colour contrast with each other. 
If only two colours are required and another palette from the `main` family is used, `main2` will be used instead.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::af_colour_palettes$main2)
```

The `main6` palette is available if an extended palette is required.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::af_colour_palettes$main6)
```


### Sequential data palette

The sequential colour palette should be used for data where the order has some meaning.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::af_colour_palettes$sequential)
```

As this palette is restricted to tints of one colour, there are issues with colour contrast.
Follow the [advice for using the sequential palette](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/#section-6) in the Analysis Function colour guidance when using this palette.


### Focus chart palette

The focus palette should be used to highlight specific elements of a plot.

`r table_note`

```{r}
sgplot:::colour_table(sgplot::af_colour_palettes$focus)
```

The light grey colour in this palette does not have sufficient colour contrast against a white background and therefore this palette should only be used when it is essential to communicate your message. 
Follow the [advice for using the focus palette](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/#section-7) in the Analysis Function colour guidance when using this palette.

The [Scottish Government focus palette](#focus-chart-palette) does not have this issue, so you may wish to use this instead.


## Using a different colour palette

There may be instances where you'd like to use a different colour palette. 
If so, this should be carefully considered to ensure it meets accessibility requirements. 
The Analysis Function guidance outlines [appropriate steps for choosing your own accessibile colour palette](https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/#section-9) and should be used.

An example of how to use an alternative colour palette is provided in the [cookbook](https://datasciencescotland.github.io/sgplot/articles/cookbook.html#using-a-different-colour-palette).
However, if you use a different palette regularly and feel it would be useful for this to be added to sgplot, please make a suggestion as per the [contributing guidance](https://datasciencescotland.github.io/sgplot/CONTRIBTUING.html).


## Viewing Palettes in R

Names and hex codes for available colours and palettes can be viewed by running the following code:

```{r view-colours, eval = FALSE, echo = TRUE}
# View names and hex codes for all colours
sgplot::sg_colour_values

# View names and hex codes for all colour palettes
sgplot::sg_colour_palettes

# View names and hex codes for `main` colour palette
sgplot::sg_colour_palettes$main

# For Analysis Function palettes, use the af_ prefix
sgplot::af_colour_palettes
```
